angular.module('serverApp')
.controller('adminCtrl',function($scope,$rootScope,$http ,$location){
        $scope.adminName =$rootScope.user.user.name;
            $scope.stdData=$rootScope.user.stdData;
            $scope.std={};
            $scope.std.subClass=1;
            $scope.giveTaskList=document.getElementById('giveTask');
            $scope.addStdForm=document.getElementById('addStdForm');
            $scope.showStd=document.getElementById('checkList');
            $scope.switchClass123=document.getElementById('switch');
        $scope.addStudentShowCard=function(){
            $scope.giveTaskList.style.display='none';
            $scope.showStd.style.display='none';
            $scope.addStdForm.style.display='block';
            $scope.switchClass123.style.display='none';
        };
            $scope.addStd=function(dataSend){
                    $http.post('users/addStd',dataSend).success(function(data){
                            alert(data.message);
                            $rootScope.user.stdData=data.data;
                            $scope.stdData=data.data;
                     })
                        .error(function(data){
                                alert(data);
                                console.log(data);
                        })
            };
            $scope.switchClass=function(){
                    $scope.giveTaskList.style.display='none';
                    $scope.showStd.style.display='none';
                    $scope.addStdForm.style.display='none';
                    $scope.switchClass123.style.display='block';
            };
            $scope.checkStdList=function(){
                    $scope.giveTaskList.style.display='none';
                    $scope.showStd.style.display='block';
                    $scope.addStdForm.style.display='none';
                    $scope.switchClass123.style.display='none';
            };
            $scope.saveClassChanged=function(){
                    $http.post('users/switchClass',$scope.stdData).success(function(data){
                            alert('Changes Saved');
                            $rootScope.user.stdData=data;
                            $scope.stdData=data;
                    })
                    .error(function(data){
                             alert(data);
                             console.log(data);
                    })
            };
        $scope.checkStdList=function(){
            $scope.giveTaskList.style.display='block';
            $scope.showStd.style.display='none';
            $scope.addStdForm.style.display='none';
            $scope.switchClass123.style.display='none';
        };
        $scope.giveTask=function(idx){
            $rootScope.giveTaskToThis = idx;
           $location.path('/giveTask');

        };
        $scope.commentOnTask=function(indx,com){
            if(!com){
             alert('Please Write Something!');
          }
            else{
                $scope.comObj={comment:com, taskNo:indx,std:$rootScope.giveTaskToThis};
            $http.post('users/taskComFromAdmin',$scope.comObj).success(function(datac){
                console.log(datac);
                  $rootScope.user.stdData=datac;
                  $scope.stdData=datac;
              })
                  .error(function(data){
                      alert(data);
                      console.log(data);
                  })
          }
        };
        $scope.giveTask12=function(taskData){
            if(!taskData){
                alert('Please Write Something!');
            }
            else{
                $scope.taskObj={task:taskData,std:$rootScope.giveTaskToThis};
                $http.post('users/giveTask',$scope.taskObj).success(function(datat){
                    console.log(datat);
                    $rootScope.user.stdData=datat;
                    $scope.stdData=datat;
                })
                    .error(function(data){
                        alert(data);
                        console.log(data);
                    })
            }
        };
        $scope.getRatings=function(){
            $http.post('users/getRatings',$rootScope.user.stdData).success(function(datat){
                $rootScope.user.stdData=datat;
                $scope.stdData=datat;
            })
                .error(function(data){
                    alert(data);
                    console.log(data);
                })
        };
        $scope.logout=function(){
            $location.path('/')
        };
    });